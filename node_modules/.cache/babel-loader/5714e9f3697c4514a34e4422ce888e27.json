{"ast":null,"code":"import _defineProperty from\"C:\\\\Projects\\\\eventfinder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"C:\\\\Projects\\\\eventfinder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Projects\\\\eventfinder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Projects\\\\eventfinder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Projects\\\\eventfinder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Projects\\\\eventfinder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Projects\\\\eventfinder\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Consumer}from'../../context';import TextInputGroup from'../layout/TextInputGroup';//import {v1 as uuid} from 'uuid';\nimport axios from'axios';var EditEvent=/*#__PURE__*/function(_Component){_inherits(EditEvent,_Component);var _super=_createSuper(EditEvent);function EditEvent(){var _this;_classCallCheck(this,EditEvent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:'',description:'',location:'',errors:{}};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch,e){var _this$state,name,description,location,updEvent,id,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_this$state=_this.state,name=_this$state.name,description=_this$state.description,location=_this$state.location;//check for errors\nif(!(name==='')){_context.next=5;break;}_this.setState({errors:{name:'Name is required'}});return _context.abrupt(\"return\");case 5:if(!(description==='')){_context.next=8;break;}_this.setState({errors:{description:'Description is required'}});return _context.abrupt(\"return\");case 8:if(!(location==='')){_context.next=11;break;}_this.setState({errors:{location:'Location is required'}});return _context.abrupt(\"return\");case 11:updEvent={name:name,description:description,location:location};id=_this.props.match.params.id;_context.next=15;return axios.put(\"https://my-json-server.typicode.com/priya-12345/EventData/events/\".concat(id),updEvent);case 15:res=_context.sent;dispatch({type:'UPDATE_EVENT',payload:res.data});_this.setState({name:'',description:'',location:'',errors:{}});_this.props.history.push('/');case 19:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.onChange=function(e){return _this.setState(_defineProperty({},e.target.name,e.target.value));};return _this;}_createClass(EditEvent,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var id,res,event;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:id=this.props.match.params.id;_context2.next=3;return axios.get(\"https://my-json-server.typicode.com/priya-12345/EventData/events/\".concat(id));case 3:res=_context2.sent;event=res.data;this.setState({name:event.name,description:event.description,location:event.location});case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var _this$state2=this.state,name=_this$state2.name,description=_this$state2.description,location=_this$state2.location,errors=_this$state2.errors;return/*#__PURE__*/React.createElement(Consumer,null,function(value){var dispatch=value.dispatch;return/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},\"Edit Event\"),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:_this2.onSubmit.bind(_this2,dispatch)},/*#__PURE__*/React.createElement(TextInputGroup,{label:\"Name\",name:\"name\",placeholder:\"Enter Name\",value:name,onChange:_this2.onChange,errors:errors.name}),/*#__PURE__*/React.createElement(TextInputGroup,{label:\"Description\",name:\"description\",placeholder:\"Enter Description\",value:description,onChange:_this2.onChange,errors:errors.description}),/*#__PURE__*/React.createElement(TextInputGroup,{label:\"Location\",name:\"location\",placeholder:\"Enter Location\",value:location,onChange:_this2.onChange,errors:errors.location}),/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Update Event\",className:\"btn btn-light btn-block\"}))));});}}]);return EditEvent;}(Component);export default EditEvent;","map":{"version":3,"sources":["C:/Projects/eventfinder/src/components/events/EditEvent.js"],"names":["React","Component","Consumer","TextInputGroup","axios","EditEvent","state","name","description","location","errors","onSubmit","dispatch","e","preventDefault","setState","updEvent","id","props","match","params","put","res","type","payload","data","history","push","onChange","target","value","get","event","bind"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {Consumer} from '../../context';\r\nimport TextInputGroup from '../layout/TextInputGroup';\r\n//import {v1 as uuid} from 'uuid';\r\nimport axios from 'axios';\r\n\r\n class EditEvent extends Component {\r\nstate={\r\n    name:'',\r\n    description:'',\r\n    location:'',\r\n    errors:{}\r\n};\r\nasync componentDidMount(){\r\n    const {id}=this.props.match.params;\r\n    const res=await axios.get(`https://my-json-server.typicode.com/priya-12345/EventData/events/${id}`);\r\n\r\n    const event=res.data;\r\n    this.setState({\r\n        name:event.name,    \r\n        description:event.description,\r\n        location:event.location\r\n    });\r\n}\r\nonSubmit=async (dispatch,e)=>{\r\n    e.preventDefault();\r\n    const{name,description,location}=this.state;\r\n//check for errors\r\n\r\nif(name===''){\r\n    this.setState({errors: {name:'Name is required'}});\r\n    return;\r\n}\r\n\r\nif(description===''){\r\n    this.setState({errors: {description:'Description is required'}});\r\n    return;\r\n}\r\n\r\nif(location===''){\r\n    this.setState({errors: {location:'Location is required'}});\r\n    return;\r\n}\r\n\r\nconst updEvent={\r\nname,\r\ndescription,\r\nlocation\r\n\r\n}\r\n   const {id}=this.props.match.params;\r\n  const res=await axios.put(`https://my-json-server.typicode.com/priya-12345/EventData/events/${id}`,updEvent);\r\n  dispatch({type:'UPDATE_EVENT',payload:res.data});\r\n    this.setState({\r\n        name:'',\r\n        description:'',\r\n        location:'',\r\n        errors:{}\r\n    });\r\n    this.props.history.push('/');\r\n};\r\nonChange=(e)=>this.setState({[e.target.name]:e.target.value});\r\n\r\n    render() {\r\n        const{ name,description,location,errors}=this.state;\r\n        return(\r\n            <Consumer>\r\n                {value=>{\r\nconst{dispatch}\r\n=value;\r\nreturn(\r\n<div className=\"card mb-3\">\r\n                <div className=\"card-header\">Edit Event</div>\r\n                <div className=\"card-body\">\r\n<form onSubmit={this.onSubmit.bind(this,dispatch)}>\r\n<TextInputGroup\r\nlabel=\"Name\"\r\nname=\"name\"\r\nplaceholder=\"Enter Name\"\r\nvalue={name}\r\nonChange={this.onChange}\r\nerrors={errors.name}\r\n/>\r\n\r\n<TextInputGroup\r\nlabel=\"Description\"\r\nname=\"description\"\r\nplaceholder=\"Enter Description\"\r\nvalue={description}\r\nonChange={this.onChange}\r\nerrors={errors.description}\r\n/>\r\n\r\n<TextInputGroup\r\nlabel=\"Location\"\r\nname=\"location\"\r\nplaceholder=\"Enter Location\"\r\nvalue={location}\r\nonChange={this.onChange}\r\nerrors={errors.location}\r\n/>\r\n<input type=\"submit\" value=\"Update Event\" className=\"btn btn-light btn-block\"/>\r\n</form>\r\n                    </div>\r\n            </div>\r\n\r\n)\r\n\r\n                }}\r\n            </Consumer>\r\n        )\r\n        \r\n    }\r\n}\r\n\r\nexport default EditEvent;"]},"metadata":{},"sourceType":"module"}